# üé≤ –£–¢–ò–õ–ò–¢–´ –ü–†–û–ï–ö–¢–ê - –°–ò–°–¢–ï–ú–ê –†–ê–ù–î–û–ú–ò–ó–ê–¶–ò–ò

## üìã –û–ë–ó–û–†

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–∏—Å—Ç–µ–º—É —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–∏ —Å **"–≤—Å–µ–ª–µ–Ω—Å–∫–∏–º" —É—Ä–æ–≤–Ω–µ–º —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏** –¥–ª—è —Ç–∞—Ä–æ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## üéØ –û–°–ù–û–í–ù–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

- ‚úÖ **–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∞—è** —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `Crypto.getRandomValues()`
- ‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —ç–Ω—Ç—Ä–æ–ø–∏–∏** –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç–∏
- ‚úÖ **Fisher-Yates shuffle** –¥–ª—è —á–µ—Å—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è
- ‚úÖ **TypeScript** —Å –ø–æ–ª–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ **Immutability** - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## üìö –ú–û–î–£–õ–ò

### 1. `randomization.ts` - –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–∏

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- `generateRandomSeed()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è seed —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç–Ω—Ç—Ä–æ–ø–∏–µ–π
- `shuffleArray()` - –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞
- `selectRandomItems()` - –≤—ã–±–æ—Ä —Å–ª—É—á–∞–π–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- `randomBoolean()` - —Å–ª—É—á–∞–π–Ω–æ–µ –±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ
- `randomInt()` / `randomFloat()` - —Å–ª—É—á–∞–π–Ω—ã–µ —á–∏—Å–ª–∞

### 2. `tarot-randomization.ts` - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ç–∞—Ä–æ

–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- `shuffleTarotDeck()` - –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –∫–æ–ª–æ–¥—ã —Ç–∞—Ä–æ
- `selectCardsForSpread()` - –≤—ã–±–æ—Ä –∫–∞—Ä—Ç –¥–ª—è —Ä–∞—Å–∫–ª–∞–¥–∞
- `createReading()` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ä–∞—Å–∫–ª–∞–¥–∞
- `determineCardReversal()` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç–∞ –∫–∞—Ä—Ç—ã

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

```typescript
import { createReading } from '@/utils/tarot-randomization';
import { useTarotStore } from '@/store/tarot.store';

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
const { cards, spreads } = useTarotStore();
const spread = spreads.find(s => s.id === spreadId);

if (spread && cards.length) {
  const reading = createReading(cards, spread);
  console.log('–†–∞—Å–∫–ª–∞–¥ —Å–æ–∑–¥–∞–Ω:', reading);
}
```

## üìñ –ü–û–î–†–û–ë–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

–°–º. —Ñ–∞–π–ª—ã:
- `randomization.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–∏
- `randomization.example.ts` - –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üî¨ –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —ç–Ω—Ç—Ä–æ–ø–∏–∏

1. **Crypto.getRandomValues()** - –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫
2. **Performance.now()** - –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
3. **Date.now()** - –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã
4. **System information** - user agent, screen size, etc.
5. **Math.random()** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —ç–Ω—Ç—Ä–æ–ø–∏—è

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Fisher-Yates shuffle** —Å –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–º –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º:

```typescript
for (let i = array.length - 1; i > 0; i--) {
  const j = secureRandomInt(0, i + 1);
  [array[i], array[j]] = [array[j], array[i]];
}
```

## ‚ö†Ô∏è –í–ê–ñ–ù–û

- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ **–Ω–µ –∏–∑–º–µ–Ω—è—é—Ç** –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (immutability)
- –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `Crypto API` (–≤—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã)
- –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç–Ω—Ç—Ä–æ–ø–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

## üìä –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è seed: ~0.1ms
- –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –∫–æ–ª–æ–¥—ã (78 –∫–∞—Ä—Ç): ~0.5ms
- –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å–∫–ª–∞–¥–∞: ~1ms

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

- –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
- –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

## üìù –õ–ò–¶–ï–ù–ó–ò–Ø

–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–æ–¥—É–ª—å –ø—Ä–æ–µ–∫—Ç–∞.

